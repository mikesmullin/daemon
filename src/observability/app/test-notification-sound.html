<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Notification Sound</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 2rem;
      background: #1a1a1a;
      color: #e0e0e0;
    }
    
    .container {
      max-width: 600px;
      margin: 0 auto;
    }
    
    h1 {
      color: #00d4ff;
      margin-bottom: 1rem;
    }
    
    .test-section {
      background: #2a2a2a;
      padding: 1.5rem;
      margin-bottom: 1rem;
      border-radius: 8px;
      border: 1px solid #333;
    }
    
    button {
      background: #00d4ff;
      color: #000;
      border: none;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      font-weight: 600;
      border-radius: 6px;
      cursor: pointer;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
    }
    
    button:hover {
      background: #00b8e6;
    }
    
    button:active {
      transform: scale(0.98);
    }
    
    .info {
      color: #888;
      font-size: 0.875rem;
      margin-top: 0.5rem;
    }
    
    .status {
      padding: 0.5rem;
      margin-top: 1rem;
      border-radius: 4px;
      background: #333;
    }
    
    .status.success {
      background: #1a3a1a;
      color: #4ade80;
    }
    
    .status.error {
      background: #3a1a1a;
      color: #f87171;
    }
    
    audio {
      margin-top: 1rem;
      width: 100%;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîî Notification Sound Test</h1>
    
    <div class="test-section">
      <h2>Test 1: Direct Audio Element</h2>
      <p>Play the notification sound using an HTML audio element:</p>
      <audio controls>
        <source src="/audio/notification.ogg" type="audio/ogg">
        Your browser does not support the audio element.
      </audio>
      <div class="info">If the audio element doesn't show, the file may not be accessible.</div>
    </div>
    
    <div class="test-section">
      <h2>Test 2: JavaScript Audio API</h2>
      <p>Play the notification sound using JavaScript (simulates channel-list behavior):</p>
      <button onclick="playNotification()">Play Notification</button>
      <button onclick="playNotificationLow()">Play at 30% Volume</button>
      <div id="status-js" class="status" style="display: none;"></div>
      <div class="info">This is how the channel-list component plays the sound.</div>
    </div>
    
    <div class="test-section">
      <h2>Test 3: Channel List Component</h2>
      <p>Test the actual channel-list component:</p>
      <button onclick="testChannelListComponent()">Simulate New Event</button>
      <div id="status-component" class="status" style="display: none;"></div>
      <div class="info">Load the full app to test the integrated component.</div>
    </div>
    
    <div class="test-section">
      <h2>Test 4: File Information</h2>
      <button onclick="checkFileInfo()">Check Audio File</button>
      <div id="file-info" class="status" style="display: none;"></div>
    </div>
  </div>
  
  <script>
    function playNotification() {
      const statusEl = document.getElementById('status-js');
      statusEl.style.display = 'block';
      statusEl.textContent = 'Attempting to play...';
      statusEl.className = 'status';
      
      try {
        const audio = new Audio('/audio/notification.ogg');
        audio.volume = 1.0; // Full volume for testing
        
        audio.onloadeddata = () => {
          statusEl.textContent = `‚úÖ Audio loaded (duration: ${audio.duration.toFixed(2)}s)`;
          statusEl.className = 'status success';
        };
        
        audio.onerror = (e) => {
          statusEl.textContent = `‚ùå Error loading audio: ${e.message || 'Unknown error'}`;
          statusEl.className = 'status error';
        };
        
        audio.play()
          .then(() => {
            statusEl.textContent = '‚úÖ Playing notification sound at 100% volume';
            statusEl.className = 'status success';
          })
          .catch(err => {
            statusEl.textContent = `‚ùå Play failed: ${err.message}`;
            statusEl.className = 'status error';
          });
      } catch (err) {
        statusEl.textContent = `‚ùå Exception: ${err.message}`;
        statusEl.className = 'status error';
      }
    }
    
    function playNotificationLow() {
      const statusEl = document.getElementById('status-js');
      statusEl.style.display = 'block';
      statusEl.textContent = 'Attempting to play at 30% volume...';
      statusEl.className = 'status';
      
      try {
        const audio = new Audio('/audio/notification.ogg');
        audio.volume = 0.3; // Same as channel-list
        
        audio.play()
          .then(() => {
            statusEl.textContent = '‚úÖ Playing notification sound at 30% volume (channel-list setting)';
            statusEl.className = 'status success';
          })
          .catch(err => {
            statusEl.textContent = `‚ùå Play failed: ${err.message}`;
            statusEl.className = 'status error';
          });
      } catch (err) {
        statusEl.textContent = `‚ùå Exception: ${err.message}`;
        statusEl.className = 'status error';
      }
    }
    
    function testChannelListComponent() {
      const statusEl = document.getElementById('status-component');
      statusEl.style.display = 'block';
      statusEl.textContent = '‚ÑπÔ∏è Please use the main app at / to test the full component integration.';
      statusEl.className = 'status';
    }
    
    async function checkFileInfo() {
      const statusEl = document.getElementById('file-info');
      statusEl.style.display = 'block';
      statusEl.textContent = 'Checking audio file...';
      statusEl.className = 'status';
      
      try {
        const response = await fetch('/audio/notification.ogg', { method: 'HEAD' });
        
        if (response.ok) {
          const size = response.headers.get('content-length');
          const type = response.headers.get('content-type');
          
          statusEl.textContent = `‚úÖ File exists\nSize: ${(size / 1024).toFixed(2)} KB\nType: ${type}`;
          statusEl.className = 'status success';
        } else {
          statusEl.textContent = `‚ùå File not found (HTTP ${response.status})`;
          statusEl.className = 'status error';
        }
      } catch (err) {
        statusEl.textContent = `‚ùå Error checking file: ${err.message}`;
        statusEl.className = 'status error';
      }
    }
  </script>
</body>
</html>
